@page
@model NodeGraphWeb.Pages.GraphModel
@{
    ViewData["Title"] = "Graph";
}

<h1>Graph Visualization</h1>

<div id="container">
    <div id="graphContainer"></div>
</div>
<div id="tooltip" style="position: absolute; visibility: hidden; background-color: #fff; border: 1px solid #000; padding: 5px; pointer-events: none;"></div>


<button id="resetZoom">Reset Zoom</button>

<button id="downloadJson">Download JSON</button>


<style>
    #container {
        border: 2px solid black;
    }

    #graphContainer {
        width: 100%;
        height: 900px;
        position: relative;
    }

    h1 {
        margin-bottom: 50px;
    }

    #resetZoom {
        padding: 5px 10px;
        font-size: 14px;
        cursor: pointer;
        background-color: gainsboro;
        margin: 0;
    }

    .hover-text {
        pointer-events: none;
        fill: black;
        font-size: 24px;
    }

    #tooltip {
        z-index: 100;
        position: absolute;
    }

    #downloadJson {
        padding: 5px 10px;
        font-size: 14px;
        cursor: pointer;
        background-color: gainsboro;
        margin: 0;
    }
</style>

<script src="https://d3js.org/d3.v6.min.js"></script>
<script>
    // var graphData = @Html.Raw(Model.GraphJsonData); // inject the JSON data into the page
    // this code fetches data from the Database
    // TO MAKE THIS WORK AGAIN, go to graph.cshtml.cs and uncomment GraphJsonData in the OnGet function
</script>

<script src="~/js/nodegraph.js"></script>
<script>
    // Ensure this runs after the entire page is rendered
    document.addEventListener('DOMContentLoaded', function () {
        initializeDownloadButton();
    });
</script>